<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>PersonaScope</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Color for Safari/Chrome top bar -->
  <meta name="theme-color" content="#050511" />
  <style>
    :root {
      --bg-1: #050511;
      --bg-2: #070719;
      --accent: #9b7bff;
      --accent-2: #4ad8ff;
      --accent-3: #ff9bde;
      --card-bg: rgba(18, 18, 31, 0.78);
      --card-border: rgba(255, 255, 255, 0.08);
      --text-main: #ffffff;
      --text-soft: #b7b7d4;
      --danger: #ff5a5a;
      --radius-xl: 26px;
      --radius-lg: 20px;
      --blur-lg: 28px;
      --transition-fast: 180ms ease-out;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    html {
      min-height: 100%;
      background:
        radial-gradient(circle at 0% -20%, rgba(255, 255, 255, 0.12), transparent 55%),
        radial-gradient(circle at 100% 120%, rgba(106, 84, 255, 0.45), transparent 55%),
        radial-gradient(circle at 0% 140%, rgba(0, 215, 255, 0.28), transparent 55%),
        linear-gradient(145deg, var(--bg-1), var(--bg-2));
    }

    body {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 16px;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text",
        system-ui, sans-serif;
      color: var(--text-main);
      background: transparent;
    }

    .app-shell {
      position: relative;
      width: 100%;
      max-width: 430px;
      border-radius: 36px;
      padding: 16px 16px 22px;
      background: radial-gradient(circle at 20% -20%, rgba(255, 255, 255, 0.16), transparent 60%),
                  radial-gradient(circle at 110% 20%, rgba(155, 123, 255, 0.35), transparent 60%),
                  rgba(7, 7, 19, 0.92);
      box-shadow:
        0 36px 120px rgba(0, 0, 0, 0.8),
        0 0 0 0.5px rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(32px);
      -webkit-backdrop-filter: blur(32px);
      overflow: hidden;
    }

    /* Empty status bar space */
    .status-bar {
      height: 18px;
      padding: 4px 2px 8px;
    }

    header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 4px 2px 8px;
      margin-bottom: 4px;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 10px;
      cursor: pointer;
    }

    .brand-logo {
      width: 32px;
      height: 32px;
      border-radius: 16px;
      overflow: hidden;
      box-shadow:
        0 0 18px rgba(155, 123, 255, 0.9),
        0 0 0 0.5px rgba(255, 255, 255, 0.35);
      flex-shrink: 0;
    }

    .brand-logo-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    .brand-text-title {
      font-size: 18px;
      font-weight: 700;
      letter-spacing: 0.02em;
    }

    .brand-text-subtitle {
      font-size: 11px;
      color: var(--text-soft);
    }

    .chip-premium {
      padding: 6px 11px;
      border-radius: 999px;
      font-size: 11px;
      background: linear-gradient(135deg, rgba(225, 201, 255, 0.3), rgba(152, 110, 255, 0.2));
      border: 0.5px solid rgba(255, 255, 255, 0.32);
      display: flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 10px 26px rgba(0, 0, 0, 0.55);
    }

    .chip-premium span {
      font-size: 12px;
    }

    .chip-premium-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 30% 20%, #fffbe6, #fbd38d, #ff7aa2);
      box-shadow: 0 0 8px rgba(255, 192, 203, 0.9);
    }

    .hero {
      padding: 4px 2px 14px;
    }

    .hero-title {
      font-size: 26px;
      font-weight: 700;
      letter-spacing: 0.02em;
      margin-bottom: 6px;
    }

    .hero-highlight {
      background: linear-gradient(90deg, #9b7bff, #4ad8ff, #ff9bde);
      -webkit-background-clip: text;
      color: transparent;
    }

    .hero-subtitle {
      font-size: 13px;
      color: var(--text-soft);
      line-height: 1.45;
      max-width: 305px;
    }

    .search-card {
      margin-top: 12px;
      padding: 12px 14px 14px;
      border-radius: var(--radius-xl);
      background: radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.18), transparent 60%),
        radial-gradient(circle at 100% 120%, rgba(155, 123, 255, 0.35), transparent 55%),
        rgba(15, 15, 26, 0.9);
      border: 0.5px solid var(--card-border);
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.85),
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.06);
      backdrop-filter: blur(var(--blur-lg));
      -webkit-backdrop-filter: blur(var(--blur-lg));
    }

    .mode-toggle-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 10px;
    }

    .mode-label {
      font-size: 11px;
      color: var(--text-soft);
    }

    .mode-toggle {
      display: inline-flex;
      padding: 3px;
      border-radius: 999px;
      background: rgba(6, 6, 20, 0.95);
      border: 0.5px solid rgba(255, 255, 255, 0.12);
      box-shadow: inset 0 0 0 0.5px rgba(255, 255, 255, 0.04);
      gap: 3px;
    }

    .mode-toggle-btn {
      border: none;
      outline: none;
      border-radius: 999px;
      padding: 4px 8px;
      font-size: 11px;
      color: rgba(212, 212, 246, 0.85);
      background: transparent;
      cursor: pointer;
      transition: background var(--transition-fast), color var(--transition-fast),
        transform var(--transition-fast), box-shadow var(--transition-fast);
      white-space: nowrap;
    }

    .mode-toggle-btn--active {
      background: radial-gradient(circle at 20% 0%, rgba(255,255,255,0.4), transparent 55%),
                  linear-gradient(135deg, #9b7bff, #4ad8ff);
      color: #050510;
      box-shadow: 0 8px 18px rgba(4, 172, 255, 0.5);
      transform: translateY(-0.5px);
    }

    .search-row {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(5, 5, 15, 0.95);
      border: 0.5px solid rgba(255, 255, 255, 0.08);
      box-shadow: inset 0 0 0 0.5px rgba(255, 255, 255, 0.06);
      margin-bottom: 8px;
    }

    .search-icon-wrap {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at 30% 10%, #ffffff, #b8f0ff, #4a86ff);
      box-shadow: 0 0 10px rgba(74, 134, 255, 0.7);
      flex-shrink: 0;
    }

    .search-icon {
      width: 13px;
      height: 13px;
      border-radius: 999px;
      border: 1.5px solid #0b1220;
      position: relative;
    }

    .search-icon::after {
      content: "";
      position: absolute;
      width: 7px;
      height: 1.6px;
      border-radius: 999px;
      background: #0b1220;
      transform: rotate(42deg);
      right: -4px;
      bottom: -1px;
    }

    .search-fields {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .search-label {
      font-size: 10px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: rgba(247, 247, 255, 0.7);
    }

    .search-input {
      border: none;
      outline: none;
      background: transparent;
      font-size: 14px;
      color: var(--text-main);
      padding: 0;
      width: 100%;
    }

    .search-input::placeholder {
      color: rgba(199, 199, 222, 0.6);
    }

    .search-button {
      border: none;
      outline: none;
      border-radius: 999px;
      padding: 7px 16px;
      font-size: 13px;
      font-weight: 600;
      letter-spacing: 0.02em;
      cursor: pointer;
      background: linear-gradient(135deg, #9b7bff, #4ad8ff);
      color: #050510;
      box-shadow:
        0 10px 26px rgba(3, 170, 255, 0.55),
        0 0 0 0.5px rgba(255, 255, 255, 0.35);
      transform: translateY(0);
      transition: transform var(--transition-fast), box-shadow var(--transition-fast),
        filter var(--transition-fast), opacity var(--transition-fast), background 220ms ease-out;
      white-space: nowrap;
      flex-shrink: 0;
    }

    .search-button:hover {
      filter: brightness(1.04);
      transform: translateY(-1px);
      box-shadow:
        0 14px 34px rgba(3, 170, 255, 0.65),
        0 0 0 0.5px rgba(255, 255, 255, 0.4);
    }

    .search-button:active {
      transform: translateY(0);
      box-shadow:
        0 6px 18px rgba(0, 0, 0, 0.8),
        0 0 0 0.5px rgba(255, 255, 255, 0.25);
    }

    .search-secondary-row {
      margin-top: 8px;
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .context-input-wrap {
      flex: 1;
      border-radius: 999px;
      padding: 7px 11px;
      background: rgba(8, 8, 18, 0.96);
      border: 0.5px solid rgba(255, 255, 255, 0.08);
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .context-input {
      border: none;
      outline: none;
      background: transparent;
      width: 100%;
      font-size: 12px;
      color: var(--text-main);
    }

    .context-input::placeholder {
      color: rgba(200, 200, 227, 0.6);
    }

    .search-hint {
      margin-top: 8px;
      font-size: 11px;
      color: var(--text-soft);
    }

    .search-hint span {
      color: rgba(193, 234, 255, 0.98);
    }

    .search-error {
      margin-top: 6px;
      font-size: 11px;
      color: var(--danger);
    }

    .results-shell {
      margin-top: 12px;
      padding-bottom: 4px;
    }

    .results-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      padding: 0 2px;
    }

    .results-header-title {
      font-size: 13px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-soft);
    }

    .results-header-pill {
      border-radius: 999px;
      padding: 4px 9px;
      font-size: 11px;
      background: rgba(29, 29, 55, 0.96);
      border: 0.5px solid rgba(255, 255, 255, 0.1);
      color: rgba(217, 217, 246, 0.95);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .results-header-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: radial-gradient(circle at 35% 20%, #ffffff, #8afff4, #4b74ff);
      box-shadow: 0 0 8px rgba(75, 116, 255, 0.9);
    }

    .cards-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
    }

    .card-span-2 {
      grid-column: span 2;
    }

    .info-card {
      position: relative;
      padding: 10px 11px 10px;
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.11), transparent 55%),
                  radial-gradient(circle at 110% 120%, rgba(155, 123, 255, 0.28), transparent 55%),
                  rgba(11, 11, 25, 0.95);
      border: 0.5px solid var(--card-border);
      box-shadow:
        0 14px 30px rgba(0, 0, 0, 0.9),
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.04);
      backdrop-filter: blur(var(--blur-lg));
      -webkit-backdrop-filter: blur(var(--blur-lg));
      overflow: hidden;
      min-height: 90px;
      display: flex;
      flex-direction: column;
      gap: 5px;
      cursor: default;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast),
        border-color var(--transition-fast), background 220ms ease-out;
    }

    .info-card::before {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.06), transparent 60%);
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--transition-fast);
    }

    .info-card:hover::before {
      opacity: 1;
    }

    .info-card:hover {
      transform: translateY(-1px);
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.95),
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.09);
      border-color: rgba(255, 255, 255, 0.12);
    }

    .info-card-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 6px;
      margin-bottom: 3px;
    }

    .info-card-title {
      font-size: 12px;
      font-weight: 600;
    }

    .info-card-tag {
      font-size: 10px;
      padding: 3px 7px;
      border-radius: 999px;
      background: rgba(33, 33, 64, 0.95);
      border: 0.5px solid rgba(255, 255, 255, 0.12);
      color: rgba(220, 220, 255, 0.96);
    }

    .info-card-body {
      font-size: 11px;
      line-height: 1.45;
      color: var(--text-soft);
      width: 100%;
    }

    .info-card-footer {
      margin-top: auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 10px;
      color: rgba(176, 176, 208, 0.8);
    }

    .pill-confidence {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 2px 7px;
      border-radius: 999px;
      background: rgba(33, 33, 64, 0.95);
      border: 0.5px solid rgba(255, 255, 255, 0.12);
    }

    .pill-confidence-dot {
      width: 5px;
      height: 5px;
      border-radius: 999px;
      background: radial-gradient(circle at 40% 20%, #ffffff, #8afff4, #4b74ff);
    }

    .pill-meta {
      text-align: right;
      font-size: 10px;
      opacity: 0.9;
    }

    .pill-meta span {
      color: rgba(198, 234, 255, 0.96);
    }

    .hidden {
      display: none !important;
    }

    .loading-card {
      position: relative;
      overflow: hidden;
    }

    .loading-shimmer {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        120deg,
        rgba(255, 255, 255, 0.04),
        rgba(255, 255, 255, 0.12),
        rgba(255, 255, 255, 0.04)
      );
      transform: translateX(-100%);
      animation: shimmer 1.35s infinite;
      pointer-events: none;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    /* Story section always under results (shown after first generate) */
    .story-section {
      margin-top: 12px;
      padding-bottom: 4px;
    }

    .story-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 6px;
      padding: 0 2px;
    }

    .story-header-title {
      font-size: 13px;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--text-soft);
    }

    .story-card-wrapper {
      display: flex;
      justify-content: center;
    }

    .story-card {
      position: relative;
      width: 100%;
      max-width: 320px;
      aspect-ratio: 4 / 3;
      border-radius: 24px;
      background:
        radial-gradient(circle at 0% 0%, rgba(255, 255, 255, 0.15), transparent 60%),
        radial-gradient(circle at 120% 0%, rgba(155, 123, 255, 0.4), transparent 60%),
        radial-gradient(circle at 0% 120%, rgba(0, 215, 255, 0.35), transparent 60%),
        linear-gradient(145deg, #272244, #120f25);
      border: 0.5px solid rgba(255, 255, 255, 0.16);
      box-shadow:
        0 18px 40px rgba(0, 0, 0, 0.92),
        inset 0 0 0 0.5px rgba(255, 255, 255, 0.06);
      overflow: hidden;
    }

    .story-card-inner {
      position: absolute;
      inset: 10px;
      border-radius: 20px;
      padding: 10px 12px 12px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }

    .story-chip {
      align-self: flex-start;
      font-size: 10px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      padding: 4px 8px;
      border-radius: 999px;
      background: rgba(5, 5, 16, 0.9);
      border: 0.5px solid rgba(255, 255, 255, 0.22);
      color: rgba(233, 233, 255, 0.9);
    }

    .story-name {
      margin-top: 8px;
      font-size: 15px;
      font-weight: 600;
    }

    .story-main-text {
      margin-top: 6px;
      font-size: 12px;
      line-height: 1.45;
      color: rgba(232, 234, 255, 0.96);
      white-space: pre-line;
    }

    .story-footer {
      margin-top: auto;
      align-self: flex-end;
      text-align: right;
      font-size: 10px;
      color: rgba(231, 236, 255, 0.95);
    }

    .story-handle {
      font-weight: 600;
    }

    .story-made {
      opacity: 0.9;
    }

    .story-actions {
      margin-top: 8px;
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      padding: 0 2px;
    }

    .story-link {
      border: none;
      background: none;
      padding: 0;
      font-size: 11px;
      color: rgba(188, 224, 255, 0.98);
      text-decoration: underline;
      cursor: pointer;
    }

    .story-hint-small {
      margin-top: 4px;
      font-size: 10px;
      color: var(--text-soft);
      text-align: right;
      padding: 0 2px;
    }

    .footer {
      margin-top: 10px;
      padding: 0 2px;
      font-size: 10px;
      color: rgba(160, 160, 195, 0.8);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }

    .footer a {
      color: rgba(188, 224, 255, 0.98);
      text-decoration: none;
    }

    .footer-right {
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .ig-img {
      width: 14px;
      height: 14px;
      border-radius: 3px;
      display: inline-block;
      object-fit: cover;
    }

    .made-by {
      margin-top: 4px;
      padding: 0 2px;
      font-size: 10px;
      color: rgba(160, 160, 195, 0.75);
      text-align: right;
    }

    @media (min-width: 768px) {
      body {
        padding: 32px;
      }
    }
  </style>
</head>
<body>
  <div class="app-shell">
    <div class="status-bar"></div>

    <header>
      <div class="brand" id="brand-home">
        <div class="brand-logo">
          <img src="personascope-logo.png" alt="PersonaScope logo" class="brand-logo-img">
        </div>
        <div>
          <div class="brand-text-title">PersonaScope</div>
          <div class="brand-text-subtitle">Playful AI-ish profiles</div>
        </div>
      </div>
      <div class="chip-premium">
        <div class="chip-premium-dot"></div>
        <span>Free • Local</span>
      </div>
    </header>

    <main>
      <section class="hero">
        <h1 class="hero-title">
          Generate a <span class="hero-highlight">fun version</span> of someone.
        </h1>
        <p class="hero-subtitle">
          Choose a mode, type a name & vibe. PersonaScope invents a playful job, an alternate-universe story, or relationship vibes.
        </p>

        <form id="search-form" class="search-card">
          <div class="mode-toggle-row">
            <div class="mode-label">Mode</div>
            <div class="mode-toggle" id="mode-toggle">
              <button type="button" class="mode-toggle-btn mode-toggle-btn--active" data-mode="job">
                Fun job
              </button>
              <button type="button" class="mode-toggle-btn" data-mode="alt">
                Alt universe
              </button>
              <button type="button" class="mode-toggle-btn" data-mode="rel">
                Relationship vibes
              </button>
            </div>
          </div>

          <div class="search-row">
            <div class="search-icon-wrap">
              <div class="search-icon"></div>
            </div>
            <div class="search-fields">
              <div class="search-label">Full name</div>
              <input
                id="full-name"
                class="search-input"
                type="text"
                placeholder="e.g. Maria Popescu"
                autocomplete="off"
              />
            </div>
            <button type="submit" class="search-button" id="search-button">
              Generate
            </button>
          </div>

          <div class="search-secondary-row">
            <div class="context-input-wrap">
              <input
                id="context"
                class="context-input"
                type="text"
                placeholder="Vibe: gym, memes, CS, city… (optional)"
              />
            </div>
          </div>

          <p class="search-hint">
            Everything is generated <span>on your device</span>. No real background checks, just vibes.
          </p>
          <p class="search-error hidden" id="search-error">
            Please enter at least a full name.
          </p>
        </form>
      </section>

      <!-- Normal results -->
      <section class="results-shell" id="results-section">
        <div class="results-header">
          <div class="results-header-title" id="results-title-label">Profile snapshot</div>
          <div class="results-header-pill">
            <div class="results-header-dot"></div>
            <span id="results-meta-label">Ready</span>
          </div>
        </div>

        <div class="cards-grid" id="results-grid">
          <article class="info-card card-span-2" id="card-work">
            <div class="info-card-header">
              <h2 class="info-card-title" id="title-work">Work & Background</h2>
              <span class="info-card-tag" id="tag-work">AI-ish summary</span>
            </div>
            <p class="info-card-body" id="text-work">
              Run a search to see how this section will look. You’ll get a playful overview based on the name & vibe you enter.
            </p>
            <div class="info-card-footer">
              <div class="pill-confidence">
                <div class="pill-confidence-dot"></div>
                <span id="conf-work">—</span>
              </div>
              <div class="pill-meta">
                <span>0</span> sources used
              </div>
            </div>
          </article>

          <article class="info-card" id="card-edu">
            <div class="info-card-header">
              <h2 class="info-card-title" id="title-edu">Education & Awards</h2>
            </div>
            <p class="info-card-body" id="text-edu">
              Degrees, origin stories and “achievements” generated purely for fun.
            </p>
            <div class="info-card-footer">
              <div class="pill-confidence">
                <div class="pill-confidence-dot"></div>
                <span id="conf-edu">—</span>
              </div>
              <div class="pill-meta">
                <span>0</span> sources
              </div>
            </div>
          </article>

          <article class="info-card" id="card-media">
            <div class="info-card-header">
              <h2 class="info-card-title" id="title-media">Media Coverage</h2>
            </div>
            <p class="info-card-body" id="text-media">
              Rumours, friend quotes and blurry-screenshot energy.
            </p>
            <div class="info-card-footer">
              <div class="pill-confidence">
                <div class="pill-confidence-dot"></div>
                <span id="conf-media">—</span>
              </div>
              <div class="pill-meta">
                <span>0</span> sources
              </div>
            </div>
          </article>

          <article class="info-card card-span-2" id="card-social">
            <div class="info-card-header">
              <h2 class="info-card-title" id="title-social">Social Presence</h2>
              <span class="info-card-tag" id="tag-social">Signals</span>
            </div>
            <p class="info-card-body" id="text-social">
              Public vibe, typical behaviour and favourite lines.
            </p>
            <div class="info-card-footer">
              <div class="pill-confidence">
                <div class="pill-confidence-dot"></div>
                <span id="conf-social">—</span>
              </div>
              <div class="pill-meta">
                Updated: <span>—</span>
              </div>
            </div>
          </article>
        </div>
      </section>

      <!-- Story prompt under results -->
      <section id="story-share-section" class="story-section hidden">
        <div class="story-header">
          <div class="story-header-title">Story-ready prompt</div>
        </div>

        <div class="story-card-wrapper">
          <div class="story-card">
            <div class="story-card-inner">
              <div class="story-chip">PersonaScope • Story</div>
              <div class="story-name" id="story-name">Your name here</div>
              <div class="story-main-text" id="story-text">
Tap "Generate" to get a short text you can post on Instagram, WhatsApp, or anywhere else.
              </div>
              <div class="story-footer">
                <div class="story-handle">@alexandru.fn</div>
                <div class="story-made">Made by Ali.</div>
              </div>
            </div>
          </div>
        </div>

        <div class="story-actions">
          <button type="button" class="story-link" id="btn-share-story">
            Share…
          </button>
          <button type="button" class="story-link" id="btn-save-story">
            Save image
          </button>
        </div>

        <p class="story-hint-small">
          Tip: the downloaded image fits nicely as a story or post background.
        </p>
      </section>
    </main>

    <footer class="footer">
      <p>Prototype toy • Not a real background check.</p>
      <div class="footer-right">
        <img src="instagram-icon.png" alt="Instagram logo" class="ig-img" aria-hidden="true" />
        <a href="https://www.instagram.com/alexandru.fn/" target="_blank" rel="noopener noreferrer">
          Developer's Instagram
        </a>
      </div>
    </footer>
    <div class="made-by">Made by Ali.</div>
  </div>

  <script>
    const form = document.getElementById("search-form");
    const fullNameInput = document.getElementById("full-name");
    const contextInput = document.getElementById("context");
    const errorEl = document.getElementById("search-error");
    const resultsMetaLabel = document.getElementById("results-meta-label");
    const resultsTitleLabel = document.getElementById("results-title-label");
    const searchButton = document.getElementById("search-button");
    const resultsGrid = document.getElementById("results-grid");
    const modeToggle = document.getElementById("mode-toggle");
    const storySection = document.getElementById("story-share-section");
    const brandHome = document.getElementById("brand-home");

    const textWork = document.getElementById("text-work");
    const textEdu = document.getElementById("text-edu");
    const textMedia = document.getElementById("text-media");
    const textSocial = document.getElementById("text-social");

    const confWork = document.getElementById("conf-work");
    const confEdu = document.getElementById("conf-edu");
    const confMedia = document.getElementById("conf-media");
    const confSocial = document.getElementById("conf-social");

    const titleWork = document.getElementById("title-work");
    const titleEdu = document.getElementById("title-edu");
    const titleMedia = document.getElementById("title-media");
    const titleSocial = document.getElementById("title-social");
    const tagWork = document.getElementById("tag-work");
    const tagSocial = document.getElementById("tag-social");

    const storyNameEl = document.getElementById("story-name");
    const storyTextEl = document.getElementById("story-text");
    const btnShareStory = document.getElementById("btn-share-story");
    const btnSaveStory = document.getElementById("btn-save-story");

    const cards = [
      document.getElementById("card-work"),
      document.getElementById("card-edu"),
      document.getElementById("card-media"),
      document.getElementById("card-social")
    ];

    const initialTextWork =
      "Run a search to see how this section will look. You’ll get a playful overview based on the name & vibe you enter.";
    const initialTextEdu =
      "Degrees, origin stories and “achievements” generated purely for fun.";
    const initialTextMedia =
      "Rumours, friend quotes and blurry-screenshot energy.";
    const initialTextSocial =
      "Public vibe, typical behaviour and favourite lines.";

    let currentMode = "job"; // "job" | "alt" | "rel"

    function setError(message) {
      if (message) {
        errorEl.textContent = message;
        errorEl.classList.remove("hidden");
      } else {
        errorEl.classList.add("hidden");
      }
    }

    function modeLabel(mode) {
      if (mode === "alt") return "Alt universe profile";
      if (mode === "rel") return "Relationship vibes";
      return "Fun job profile";
    }

    function setLoading(isLoading) {
      if (isLoading) {
        resultsMetaLabel.textContent = "Thinking…";
        searchButton.textContent = "Thinking…";
        searchButton.disabled = true;
        cards.forEach((card) => {
          card.classList.add("loading-card");
          const shimmer = document.createElement("div");
          shimmer.className = "loading-shimmer";
          card.appendChild(shimmer);
        });
      } else {
        resultsMetaLabel.textContent = modeLabel(currentMode);
        searchButton.textContent = "Generate";
        searchButton.disabled = false;
        cards.forEach((card) => {
          card.classList.remove("loading-card");
          const shimmer = card.querySelector(".loading-shimmer");
          if (shimmer) shimmer.remove();
        });
      }
    }

    function hashString(str) {
      let h = 0;
      for (let i = 0; i < str.length; i++) {
        h = (h * 31 + str.charCodeAt(i)) >>> 0;
      }
      return h;
    }

    function pickFrom(list, seed, offset) {
      return list[(seed + offset) % list.length];
    }

    async function fetchPersonSummaryMock(fullName, context, mode) {
      await new Promise((res) => setTimeout(res, 700)); // fake thinking

      const base = (fullName + " " + (context || "")).trim() || "Someone";
      const seed = hashString(base.toLowerCase());
      const displayName = fullName || "This mysterious human";
      const vibe = context ? ` (${context})` : "";

      const now = new Date();
      const timeLabel = now.toLocaleTimeString([], {
        hour: "2-digit",
        minute: "2-digit"
      });

      // Shared fun stuff for story text + job mode
      const funTitles = [
        "Chief Vibes Officer",
        "Professional Overthinker",
        "Senior Espresso Engineer",
        "Director of Chaotic Good",
        "Certified Meme Strategist",
        "Head of Last-Minute Decisions",
        "Lead Productivity Procrastinator",
        "Chief Snack Operations Manager",
        "Junior Universe Designer",
        "Night Shift Philosopher"
      ];

      const domains = [
        "at the Ministry of Memes",
        "in the Intergalactic Pizza Division",
        "for the Department of Unexpected Plot Twists",
        "inside the Global Coffee Supply Chain",
        "at the Institute of Unfinished Projects",
        "within the Bureau of Over-Engineered Solutions",
        "for the League of Questionable Life Choices",
        "at the Academy of Infinite Scrolling"
      ];

      const traits = [
        "chaotic good",
        "strategically lazy",
        "hyper-organised on the inside, messy on the outside",
        "addicted to learning random things at 2 AM",
        "dangerously optimistic",
        "chronically early in their mind, always late in reality",
        "allergic to low FPS",
        "powered by caffeine and voice messages",
        "70% jokes, 30% deep thoughts",
        "pretending to have it together since forever"
      ];

      const hooks = [
        "Low effort, high vibe. Would recommend.",
        "Currently turning average days into main-character scenes.",
        "Built different, powered by caffeine and pure chaos.",
        "Soft heart, loud laugh, questionable sleep schedule.",
        "Probably overthinking this caption right now.",
        "Proof that being unserious can still be iconic.",
        "Living on instinct, memes and last-minute plans.",
        "Somehow both the problem and the solution."
      ];

      const powers = [
        "turn any situation into a meme",
        "remember random details from years ago",
        "send the perfect reaction GIF",
        "make everyone feel weirdly comfortable oversharing",
        "turn overthinking into a full time position",
        "debug moods better than code",
        "make one hour feel like five minutes when talking",
        "spot red flags from a single text"
      ];

      const weaknesses = [
        "cannot stop checking their phone",
        "FPS drops in emotional conversations",
        "starts five projects, finishes one and a half",
        "forgets what they walked into the room for",
        "thinks “I’ll sleep early tonight” every day",
        "saves money… until food delivery appears",
        "never says no to “one more game”"
      ];

      const catchphrases = [
        "“Ok but hear me out…”",
        "“I have a plan. Kind of.”",
        "“We ball.”",
        "“Trust the process (even if I don’t).”",
        "“Worst case, it’s a story.”",
        "“Let’s make it a core memory.”",
        "“What if we just… didn’t overthink this?”"
      ];

      const title = pickFrom(funTitles, seed, 1);
      const domain = pickFrom(domains, seed, 7);
      const trait = pickFrom(traits, seed, 3);
      const power = pickFrom(powers, seed, 11);
      const weakness = pickFrom(weaknesses, seed, 19);
      const catchphrase = pickFrom(catchphrases, seed, 5);
      const hook = pickFrom(hooks, seed, 13);

      const storyText =
        `Meet ${displayName}${vibe} – ${title} ${domain}.\n` +
        `Energy: ${trait}. They tend to ${power} and their biggest weakness is that they ${weakness}.\n` +
        `${hook}`;

      // Alt universe mode
      if (mode === "alt") {
        const worlds = [
          "a neon-soaked cyber city",
          "a slightly cursed fantasy kingdom",
          "a cozy space station orbiting a purple planet",
          "an endless summer festival by the sea",
          "a floating library above the clouds",
          "a glitchy arcade dimension",
          "a secret underground city of night owls",
          "a desert of old computers and neon signs"
        ];

        const roles = [
          "time-bending DJ of timelines",
          "keeper of forgotten side quests",
          "guardian of late-night confessions",
          "pilot of emotionally unstable starships",
          "architect of impossible staircases",
          "curator of unfinished stories",
          "negotiator between introverts and parties",
          "smuggler of stolen sunsets"
        ];

        const companions = [
          "a small floating robot that plays lo-fi beats",
          "a telepathic cat that judges everyone silently",
          "a tiny dragon obsessed with phone screens",
          "a holographic notebook that talks back",
          "a ghost that only appears during voice messages",
          "a dog that can pause time for 3 seconds",
          "a backpack that gives unasked-for advice"
        ];

        const quests = [
          "find a place where everyone feels like they belong",
          "collect moments that feel like movie scenes",
          "make sure nobody ever walks home alone in the rain",
          "protect people who overshare but mean well",
          "rewrite memories so they hurt less and glow more",
          "teach people how to rest without feeling guilty",
          "build a city powered by unmatched vibes"
        ];

        const glitches = [
          "time jumps forward when they overthink",
          "text messages sometimes send themselves",
          "mirrors show how they feel, not how they look",
          "street lights blink when they’re nearby",
          "songs start playing in public that match their mood",
          "people randomly say “I feel like I’ve met you before”"
        ];

        const soundtrack = [
          "slow reverb remixes at 3 AM",
          "80s synthwave in the rain",
          "acoustic guitar on rooftops",
          "bass-heavy club anthems in empty streets",
          "lo-fi beats on train rides",
          "movie-score strings during eye contact"
        ];

        const world = pickFrom(worlds, seed, 1);
        const role = pickFrom(roles, seed, 3);
        const companion = pickFrom(companions, seed, 5);
        const quest = pickFrom(quests, seed, 7);
        const glitch = pickFrom(glitches, seed, 9);
        const music = pickFrom(soundtrack, seed, 11);

        return {
          full_name: displayName,
          context,
          story_text: storyText,
          summary: {
            work_and_background:
              `In one alternate timeline, ${displayName}${vibe} lives in ${world} as a ${role}. ` +
              `Their presence bends the atmosphere slightly: people feel like they’re in a scene, not just real life.`,
            education_and_awards:
              `They never finished a “normal” school there. Instead, they studied under strangers on trains, quiet night shifts, ` +
              `and songs played at the exact right moment. Locals say they earned the unofficial title of “person you think about randomly months later”.`,
            media_coverage:
              `Urban legends talk about a figure who shows up exactly when you need to talk, listens like it’s their last mission, ` +
              `and then disappears before things get awkward. Camera footage is always blurry, but everyone remembers how they felt.`,
            social_presence:
              `They travel with ${companion}, working on a long-term quest: ${quest}. ` +
              `Reality around them sometimes glitches: ${glitch}. Their life’s soundtrack is mostly ${music}, ` +
              `and every goodbye feels like it might be a season finale.`
          },
          meta: {
            confidence_work: "Purely fictional",
            confidence_edu: "Alt-timeline certified",
            confidence_media: "Urban legend tier",
            confidence_social: "Soft sci-fi canon",
            sources_count: 0,
            updated_at_label: timeLabel
          }
        };
      }

      // Relationship vibes mode
      if (mode === "rel") {
        const energies = [
          "golden retriever energy in human form",
          "mysterious main-character energy with soft edges",
          "chill best-friend energy that accidentally flirts",
          "selective social butterfly who secretly loves deep talks",
          "calm, grounding energy with hidden chaos",
          "hyper but sensitive “I got you” energy",
          "quiet observer who notices everything",
          "walking “are you okay? text me” energy"
        ];

        const textingStyles = [
          "replies fast, then disappears for 4 hours to overthink the response",
          "sends 3–5 voice notes instead of a normal text",
          "uses way too many emojis but somehow it works",
          "sends TikToks as a love language",
          "double-texts without shame when they care",
          "leaves you on read but then shows up with your favourite snack",
          "always reacts to your stories but rarely starts the convo",
          "writes small essays and then says “sorry for the paragraph”"
        ];

        const loveLanguages = [
          "random check-in messages at odd hours",
          "remembering tiny details you forgot you even said",
          "sending songs and memes that “feel like you”",
          "showing up when everyone else is busy",
          "physical touch combined with teasing",
          "acts of service like fixing small problems without making a big deal",
          "quality time doing nothing but scrolling together",
          "giving honest advice even when it’s uncomfortable"
        ];

        const conflictStyles = [
          "needs a bit of time to cool down, then wants to fix it properly",
          "cracks jokes in arguments but still cares about solving the issue",
          "goes quiet when hurt but opens up when they feel safe",
          "overexplains everything because they hate being misunderstood",
          "would rather talk face to face than argue over text",
          "says “I’m fine” but absolutely is not fine",
          "needs reassurance mid-argument that you’re not leaving",
          "takes responsibility and apologises when they realise they messed up"
        ];

        const greenFlags = [
          "remembers your schedule and wishes you luck before important things",
          "asks how you really are and waits for the real answer",
          "notices when your vibe is off even if you say “it’s nothing”",
          "celebrates your wins like they’re theirs too",
          "makes sure you eat, sleep and drink water at least sometimes",
          "protects your secrets even after the friendship/relationship ends",
          "talks about boundaries and actually respects them",
          "doesn’t make you guess if they care – it shows"
        ];

        const chaosFactors = [
          "randomly disappears into their own world but comes back with stories",
          "changes plans last minute but somehow makes the night iconic",
          "lives in “one more episode” and “one more game” land",
          "forgets what day it is but remembers how you like your coffee",
          "sends mixed signals sometimes because their brain & heart argue a lot",
          "gets attached slowly but then it’s over for everyone else",
          "has moments of “I want you close” and “I’m scared of this” in the same hour",
          "pretends not to care but gets jealous in low-key ways"
        ];

        const futureVibes = [
          "movie-night cuddles and pausing to overanalyse characters",
          "slow mornings, shared hoodies and sending each other ugly selfies",
          "roadtrips with badly curated playlists and inside jokes",
          "gym dates followed by ordering way too much food",
          "late-night walks where they randomly go deep",
          "building a life where both of you feel like best friends first",
          "quiet nights gaming or scrolling next to each other in comfortable silence",
          "fighting life as a team instead of fighting each other"
        ];

        const energy = pickFrom(energies, seed, 1);
        const texting = pickFrom(textingStyles, seed, 3);
        const love = pickFrom(loveLanguages, seed, 5);
        const conflict = pickFrom(conflictStyles, seed, 7);
        const flag = pickFrom(greenFlags, seed, 9);
        const chaos = pickFrom(chaosFactors, seed, 11);
        const future = pickFrom(futureVibes, seed, 13);

        return {
          full_name: displayName,
          context,
          story_text: storyText,
          summary: {
            work_and_background:
              `As a partner or close friend, ${displayName}${vibe} gives off ${energy}. ` +
              `They’re the type of person who can turn a random Tuesday into a core memory without even trying.`,
            education_and_awards:
              `Their “relationship education” mostly comes from late-night overthinking, watching other people’s mistakes, ` +
              `and promising themselves they’ll do better. Major in emotional self-awareness, minor in “I’m bad at this but I’m trying”.`,
            media_coverage:
              `If you asked their people to describe them, you’d hear things like “a bit chaotic but with a huge heart” and ` +
              `“they pretend they don’t care but they really, really do”. There are probably screenshots of their sweetest texts hidden in someone’s gallery.`,
            social_presence:
              `In conversations, they’re the type to ${texting}. Their main love languages are ${love}. ` +
              `In conflict, they usually ${conflict}. Green flag energy: ${flag}. ` +
              `Chaos level: ${chaos}. If things go well, the future vibe is ${future}.`
          },
          meta: {
            confidence_work: "Absolutely not scientific",
            confidence_edu: "Based on pure vibes",
            confidence_media: "Friends would probably agree a bit",
            confidence_social: "For entertainment only",
            sources_count: 0,
            updated_at_label: timeLabel
          }
        };
      }

      // Default: fun job profile
      return {
        full_name: displayName,
        context,
        story_text: storyText,
        summary: {
          work_and_background:
            `${displayName}${vibe} currently serves as ${title} ${domain}. ` +
            `Their unofficial job description: keep the energy high, the stories interesting and the chaos mostly controlled.`,
          education_and_awards:
            `${displayName} holds an honorary degree in being “${trait}”. ` +
            `Additional micro-credentials include advanced procrastination tactics and expert-level last-minute clutch moments.`,
          media_coverage:
            `Rumoured sightings include group chats, Insta stories with low-light selfies, and at least one blurry photo labelled ` +
            `"bro trust me this is iconic". Friends regularly describe them as “too much, but in a good way”.`,
          social_presence:
            `${displayName} tends to ${power}. Their main weakness: ${weakness}. ` +
            `Most common catchphrase: ${catchphrase}`
        },
        meta: {
          confidence_work: "100% playful",
          confidence_edu: "Certified silly",
          confidence_media: "Based on pure vibes",
          confidence_social: "Not serious at all",
          sources_count: 0,
          updated_at_label: timeLabel
        }
      };
    }

    function applyModeUI(mode) {
      if (mode === "alt") {
        resultsTitleLabel.textContent = "Alt universe snapshot";
        titleWork.textContent = "Core role in that world";
        titleEdu.textContent = "Origin & “education”";
        titleMedia.textContent = "Legends & rumours";
        titleSocial.textContent = "Companions & glitches";
        tagWork.textContent = "Fictional timeline";
        tagSocial.textContent = "Other universe";
      } else if (mode === "rel") {
        resultsTitleLabel.textContent = "Relationship vibes snapshot";
        titleWork.textContent = "How they feel up close";
        titleEdu.textContent = "Emotional ‘education’";
        titleMedia.textContent = "What friends would say";
        titleSocial.textContent = "Chats, dates & dynamics";
        tagWork.textContent = "Vibes only";
        tagSocial.textContent = "Soft hearts edition";
      } else {
        resultsTitleLabel.textContent = "Profile snapshot";
        titleWork.textContent = "Work & Background";
        titleEdu.textContent = "Education & Awards";
        titleMedia.textContent = "Media Coverage";
        titleSocial.textContent = "Social Presence";
        tagWork.textContent = "AI-ish summary";
        tagSocial.textContent = "Signals";
      }
    }

    function renderResults(data) {
      const meta = data.meta || {};
      textWork.textContent = data.summary.work_and_background;
      textEdu.textContent = data.summary.education_and_awards;
      textMedia.textContent = data.summary.media_coverage;
      textSocial.textContent = data.summary.social_presence;

      confWork.textContent = meta.confidence_work || "—";
      confEdu.textContent = meta.confidence_edu || "—";
      confMedia.textContent = meta.confidence_media || "—";
      confSocial.textContent = meta.confidence_social || "—";

      const sourcesBadges = resultsGrid.querySelectorAll(".pill-meta span");
      sourcesBadges.forEach((el, index) => {
        if (index === sourcesBadges.length - 1) {
          el.textContent = meta.updated_at_label || "Just now";
        } else {
          el.textContent = meta.sources_count != null ? meta.sources_count : "0";
        }
      });

      // Update story card under results
      storyNameEl.textContent = data.full_name || "Your name here";
      storyTextEl.textContent = data.story_text || "";
      storySection.classList.remove("hidden");
    }

    async function handleSearch(event) {
      event.preventDefault();
      const fullName = fullNameInput.value.trim();
      const context = contextInput.value.trim();

      if (!fullName) {
        setError("Please enter a full name before generating.");
        return;
      }
      setError("");

      setLoading(true);

      try {
        const data = await fetchPersonSummaryMock(fullName, context, currentMode);
        renderResults(data);
      } catch (err) {
        console.error(err);
        setError("Something went wrong in the local demo.");
      } finally {
        setLoading(false);
      }
    }

    form.addEventListener("submit", handleSearch);

    modeToggle.querySelectorAll(".mode-toggle-btn").forEach((btn) => {
      btn.addEventListener("click", () => {
        const mode = btn.getAttribute("data-mode");
        if (mode === currentMode) return;
        currentMode = mode;
        modeToggle.querySelectorAll(".mode-toggle-btn").forEach((b) =>
          b.classList.remove("mode-toggle-btn--active")
        );
        btn.classList.add("mode-toggle-btn--active");
        applyModeUI(currentMode);
        resultsMetaLabel.textContent = modeLabel(currentMode);
      });
    });

    // Brand click = reset app
    brandHome.addEventListener("click", () => {
      window.location.reload();
    });

    // Simple text wrapping helper for canvas
    function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
      const words = text.split(" ");
      let line = "";
      for (let n = 0; n < words.length; n++) {
        const testLine = line + words[n] + " ";
        const metrics = ctx.measureText(testLine);
        const testWidth = metrics.width;
        if (testWidth > maxWidth && n > 0) {
          ctx.fillText(line, x, y);
          line = words[n] + " ";
          y += lineHeight;
        } else {
          line = testLine;
        }
      }
      ctx.fillText(line, x, y);
      return y;
    }

    function generateStoryImage(name, text) {
      const width = 1080;
      const height = 810; // 4:3
      const canvas = document.createElement("canvas");
      canvas.width = width;
      canvas.height = height;
      const ctx = canvas.getContext("2d");

      // Background gradient
      const bgGrad = ctx.createLinearGradient(0, 0, width, height);
      bgGrad.addColorStop(0, "#272244");
      bgGrad.addColorStop(0.5, "#1a1333");
      bgGrad.addColorStop(1, "#120f25");
      ctx.fillStyle = bgGrad;
      ctx.fillRect(0, 0, width, height);

      // Soft overlay circles
      const radial1 = ctx.createRadialGradient(0, 0, 0, 0, 0, width * 0.7);
      radial1.addColorStop(0, "rgba(255,255,255,0.20)");
      radial1.addColorStop(1, "rgba(255,255,255,0)");
      ctx.fillStyle = radial1;
      ctx.fillRect(0, 0, width, height);

      const radial2 = ctx.createRadialGradient(width, 0, 0, width, 0, width * 0.7);
      radial2.addColorStop(0, "rgba(155,123,255,0.35)");
      radial2.addColorStop(1, "rgba(155,123,255,0)");
      ctx.fillStyle = radial2;
      ctx.fillRect(0, 0, width, height);

      const radial3 = ctx.createRadialGradient(0, height, 0, 0, height, width * 0.7);
      radial3.addColorStop(0, "rgba(0,215,255,0.35)");
      radial3.addColorStop(1, "rgba(0,215,255,0)");
      ctx.fillStyle = radial3;
      ctx.fillRect(0, 0, width, height);

      // Story chip
      ctx.fillStyle = "rgba(5,5,16,0.9)";
      const chipX = 80;
      const chipY = 90;
      const chipW = 260;
      const chipH = 40;
      const r = 20;
      ctx.beginPath();
      ctx.moveTo(chipX + r, chipY);
      ctx.lineTo(chipX + chipW - r, chipY);
      ctx.quadraticCurveTo(chipX + chipW, chipY, chipX + chipW, chipY + r);
      ctx.lineTo(chipX + chipW, chipY + chipH - r);
      ctx.quadraticCurveTo(chipX + chipW, chipY + chipH, chipX + chipW - r, chipY + chipH);
      ctx.lineTo(chipX + r, chipY + chipH);
      ctx.quadraticCurveTo(chipX, chipY + chipH, chipX, chipY + chipH - r);
      ctx.lineTo(chipX, chipY + r);
      ctx.quadraticCurveTo(chipX, chipY, chipX + r, chipY);
      ctx.closePath();
      ctx.fill();

      ctx.strokeStyle = "rgba(255,255,255,0.25)";
      ctx.lineWidth = 1;
      ctx.stroke();

      ctx.fillStyle = "rgba(233,233,255,0.95)";
      ctx.font = "600 24px -apple-system, system-ui, sans-serif";
      ctx.fillText("PersonaScope • Story", chipX + 18, chipY + 26);

      // Name
      ctx.fillStyle = "#ffffff";
      ctx.font = "600 40px -apple-system, system-ui, sans-serif";
      ctx.fillText(name || "Your name here", 80, 170);

      // Main text
      ctx.fillStyle = "rgba(232,234,255,0.96)";
      ctx.font = "26px -apple-system, system-ui, sans-serif";
      const textStartY = 210;
      const endY = wrapText(ctx, text || "", 80, textStartY, width - 160, 38);

      // Footer (handle + made by) bottom right
      ctx.textAlign = "right";
      ctx.fillStyle = "rgba(231,236,255,0.98)";
      ctx.font = "bold 26px -apple-system, system-ui, sans-serif";
      ctx.fillText("@alexandru.fn", width - 80, height - 80);
      ctx.font = "22px -apple-system, system-ui, sans-serif";
      ctx.fillText("Made by Ali.", width - 80, height - 50);
      ctx.textAlign = "left";

      const link = document.createElement("a");
      link.href = canvas.toDataURL("image/png");
      link.download = "personascope-story.png";
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
    }

    btnShareStory.addEventListener("click", () => {
      const text = storyTextEl.textContent.trim();
      if (!text) return;
      const payload = {
        text: text + "\n\nGenerated with PersonaScope",
        url: window.location.href
      };
      if (navigator.share) {
        navigator.share(payload).catch(() => {});
      } else if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(payload.text).then(() => {
          alert("Story text copied. Paste it into Instagram, WhatsApp, etc.");
        }).catch(() => {
          alert("Couldn’t share automatically. You can copy the text manually.");
        });
      } else {
        alert("Sharing isn’t available here. You can screenshot or copy the text manually.");
      }
    });

    btnSaveStory.addEventListener("click", () => {
      const name = storyNameEl.textContent.trim() || "Your name here";
      const text = storyTextEl.textContent.trim();
      if (!text) {
        alert("Generate a story first.");
        return;
      }
      generateStoryImage(name, text);
    });

    // Initial state
    applyModeUI(currentMode);
  </script>
</body>
</html>
